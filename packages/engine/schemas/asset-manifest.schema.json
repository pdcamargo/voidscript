{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://voidscript.dev/schemas/asset-manifest.schema.json",
  "title": "VoidScript Asset Manifest",
  "description": "Schema for VoidScript engine asset manifest files",
  "type": "object",
  "additionalProperties": {
    "$ref": "#/definitions/AssetConfig"
  },
  "definitions": {
    "AssetConfig": {
      "oneOf": [
        { "$ref": "#/definitions/TextureAssetConfig" },
        { "$ref": "#/definitions/AudioAssetConfig" },
        { "$ref": "#/definitions/Model3DAssetConfig" },
        { "$ref": "#/definitions/TiledMapAssetConfig" },
        { "$ref": "#/definitions/AnimationAssetConfig" }
      ]
    },
    "TextureAssetConfig": {
      "type": "object",
      "description": "Texture asset configuration (images, sprite sheets)",
      "required": ["type", "path"],
      "properties": {
        "type": {
          "const": "texture",
          "description": "Asset type identifier"
        },
        "path": {
          "type": "string",
          "description": "Path to the texture file (e.g., '/assets/sprites/player.png')"
        },
        "magFilter": {
          "$ref": "#/definitions/TextureFilter",
          "description": "Magnification filter (default: 'linear')"
        },
        "minFilter": {
          "$ref": "#/definitions/TextureFilter",
          "description": "Minification filter (default: 'linear')"
        },
        "wrapS": {
          "$ref": "#/definitions/TextureWrap",
          "description": "Horizontal wrapping mode (default: 'clamp')"
        },
        "wrapT": {
          "$ref": "#/definitions/TextureWrap",
          "description": "Vertical wrapping mode (default: 'clamp')"
        },
        "sRGB": {
          "type": "boolean",
          "description": "Use sRGB color space (default: true)",
          "default": true
        },
        "generateMipmaps": {
          "type": "boolean",
          "description": "Generate mipmaps (default: true)",
          "default": true
        },
        "width": {
          "type": "integer",
          "description": "Texture width in pixels",
          "minimum": 1
        },
        "height": {
          "type": "integer",
          "description": "Texture height in pixels",
          "minimum": 1
        },
        "sprites": {
          "type": "array",
          "description": "Sprite definitions for sprite sheets/atlases",
          "items": {
            "$ref": "#/definitions/SpriteDefinition"
          }
        }
      },
      "additionalProperties": false
    },
    "AudioAssetConfig": {
      "type": "object",
      "description": "Audio asset configuration (sound effects, music)",
      "required": ["type", "path"],
      "properties": {
        "type": {
          "const": "audio",
          "description": "Asset type identifier"
        },
        "path": {
          "type": "string",
          "description": "Path to the audio file (e.g., '/assets/audio/music.ogg')"
        }
      },
      "additionalProperties": false
    },
    "Model3DAssetConfig": {
      "type": "object",
      "description": "3D model asset configuration (GLTF, GLB, FBX)",
      "required": ["type", "path", "format"],
      "properties": {
        "type": {
          "const": "model3d",
          "description": "Asset type identifier"
        },
        "path": {
          "type": "string",
          "description": "Path to the model file (e.g., '/assets/models/character.glb')"
        },
        "format": {
          "$ref": "#/definitions/ModelFormat",
          "description": "Model file format"
        },
        "scale": {
          "oneOf": [
            { "type": "number" },
            { "$ref": "#/definitions/Vector3" }
          ],
          "description": "Scale factor or vector (default: 1.0)"
        },
        "rotation": {
          "$ref": "#/definitions/Vector3",
          "description": "Rotation in degrees (Euler angles)"
        },
        "hasAnimations": {
          "type": "boolean",
          "description": "Whether the model contains animations"
        },
        "animationNames": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of animation names in the model"
        },
        "vertexCount": {
          "type": "integer",
          "description": "Number of vertices (metadata)",
          "minimum": 0
        },
        "triangleCount": {
          "type": "integer",
          "description": "Number of triangles (metadata)",
          "minimum": 0
        },
        "boundingBox": {
          "type": "object",
          "properties": {
            "min": { "$ref": "#/definitions/Vector3" },
            "max": { "$ref": "#/definitions/Vector3" }
          },
          "required": ["min", "max"],
          "description": "Bounding box dimensions"
        }
      },
      "additionalProperties": false
    },
    "TiledMapAssetConfig": {
      "type": "object",
      "description": "Tiled map asset configuration (.tmj, .json)",
      "required": ["type", "path"],
      "properties": {
        "type": {
          "const": "tiledmap",
          "description": "Asset type identifier"
        },
        "path": {
          "type": "string",
          "description": "Path to the Tiled map file (e.g., '/assets/maps/level1.tmj')"
        },
        "pixelsPerUnit": {
          "type": "number",
          "description": "Pixels per world unit (default: map's tilewidth)",
          "minimum": 0,
          "exclusiveMinimum": true
        },
        "worldOffset": {
          "$ref": "#/definitions/Vector3",
          "description": "World-space offset for the map"
        },
        "autoSpawnLayers": {
          "type": "boolean",
          "description": "Automatically spawn tile layers (default: true)",
          "default": true
        }
      },
      "additionalProperties": false
    },
    "AnimationAssetConfig": {
      "type": "object",
      "description": "Animation clip asset configuration (.anim.json)",
      "required": ["type", "path"],
      "properties": {
        "type": {
          "const": "animation",
          "description": "Asset type identifier"
        },
        "path": {
          "type": "string",
          "description": "Path to the animation file (e.g., '/assets/animations/walk.anim.json')"
        }
      },
      "additionalProperties": false
    },
    "SpriteDefinition": {
      "oneOf": [
        { "$ref": "#/definitions/TiledSpriteDefinition" },
        { "$ref": "#/definitions/RectSpriteDefinition" }
      ]
    },
    "TiledSpriteDefinition": {
      "type": "object",
      "description": "Tile-based sprite definition (grid sprite sheets)",
      "required": ["id", "name", "tileIndex", "tileWidth", "tileHeight"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique sprite identifier"
        },
        "name": {
          "type": "string",
          "description": "Display name for the sprite"
        },
        "tileIndex": {
          "type": "integer",
          "description": "Tile index in the sheet (0-based, left-to-right, top-to-bottom)",
          "minimum": 0
        },
        "tileWidth": {
          "type": "integer",
          "description": "Tile width in pixels",
          "minimum": 1
        },
        "tileHeight": {
          "type": "integer",
          "description": "Tile height in pixels",
          "minimum": 1
        }
      },
      "additionalProperties": false
    },
    "RectSpriteDefinition": {
      "type": "object",
      "description": "Rect-based sprite definition (arbitrary atlas positions)",
      "required": ["id", "name", "x", "y", "width", "height"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique sprite identifier"
        },
        "name": {
          "type": "string",
          "description": "Display name for the sprite"
        },
        "x": {
          "type": "integer",
          "description": "X position in the texture (pixels from left)",
          "minimum": 0
        },
        "y": {
          "type": "integer",
          "description": "Y position in the texture (pixels from top)",
          "minimum": 0
        },
        "width": {
          "type": "integer",
          "description": "Sprite width in pixels",
          "minimum": 1
        },
        "height": {
          "type": "integer",
          "description": "Sprite height in pixels",
          "minimum": 1
        }
      },
      "additionalProperties": false
    },
    "TextureFilter": {
      "type": "string",
      "enum": ["nearest", "linear"],
      "description": "Texture filtering mode"
    },
    "TextureWrap": {
      "type": "string",
      "enum": ["repeat", "clamp", "mirror"],
      "description": "Texture wrapping mode"
    },
    "ModelFormat": {
      "type": "string",
      "enum": ["gltf", "glb", "fbx"],
      "description": "3D model file format"
    },
    "Vector3": {
      "type": "object",
      "required": ["x", "y", "z"],
      "properties": {
        "x": { "type": "number" },
        "y": { "type": "number" },
        "z": { "type": "number" }
      },
      "additionalProperties": false,
      "description": "3D vector with x, y, z components"
    }
  }
}
